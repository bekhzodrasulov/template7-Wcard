const links = document.querySelectorAll('a[href^="#"]');

links.forEach((link) => {
  link.addEventListener("click", function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute("href"));
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
  });
});

const elements = document.querySelectorAll(".animate");

const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add("visible");
        }, index * 50); // –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ—è–≤–ª–µ–Ω–∏—è–º–∏
      }
    });
  },
  {
    threshold: 0.1,
  }
);

elements.forEach((el) => observer.observe(el));

const playButton = document.getElementById("playButton");
const playIcon = document.getElementById("playIcon");
const bgMusic = document.getElementById("bgMusic");

playButton.addEventListener("click", () => {
  if (bgMusic.paused) {
    bgMusic.play();
    playIcon.src = "images/pouse.png";
    playIcon.alt = "Pause";
  } else {
    bgMusic.pause();
    playIcon.src = "images/play.png";
    playIcon.alt = "Play";
  }
});

function updateCountdown() {
  const weddingDate = new Date("2025-09-31T19:00:00");
  const now = new Date();
  const diff = weddingDate - now;

  if (diff <= 0) {
    document.getElementById("days").textContent = Number(0);
    document.getElementById("hours").textContent = Number(0);
    document.getElementById("minutes").textContent = Number(0);
    document.getElementById("seconds").textContent = Number(0);
    return;
  }

  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const minutes = Math.floor((diff / 1000 / 60) % 60);
  const seconds = Math.floor((diff / 1000) % 60);

  document.getElementById("days").textContent = Number(days);
  document.getElementById("hours").textContent = Number(hours);
  document.getElementById("minutes").textContent = Number(minutes);
  document.getElementById("seconds").textContent = Number(seconds);
}

setInterval(updateCountdown, 1000);
updateCountdown();

if (!/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)) {
  document.body.innerHTML = `
      <div style="text-align:center; padding: 50px; font-family: sans-serif;">
        <h2>Faqat mobil qurilmalardan kirish mumkin üì±</h2>
        <p>Havolani telefonda oching.</p>
        <h2>–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ üì±</h2>
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ.</p>
        <h2>Only mobile devices are allowed üì±</h2>
        <p>Please open the site on a phone.</p>
        <a href="https://t.me/inviteuio">inviteu.io</a>
      </div>
    `;
}
